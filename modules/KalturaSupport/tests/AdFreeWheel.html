<!DOCTYPE HTML>
<html>
<head>
<title>FreeWheel Ad and Companion </title>
<script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
<script type="text/javascript" src="../../../mwEmbedLoader.php?debug=true"></script>
<script type="text/javascript"> 

function fw_config() {
	return {
		siteSectionId: 'abc.com_demotest',
		siteSectionIdType: '0'
	};
}

</script>
<script type="text/javascript">	
function jsKalturaPlayerTest( videoId ){
	
	// Name this module
	module( "FreeWheel Ad and Companion" );
	var kdp = $('#' + videoId ).get(0);
	
	asyncTest( "FreeWheel Ad and Companion", function(){
		kalturaQunitWaitForPlayer(function(){
			kdp.sendNotification( 'doPlay' );
			// wait for 10 seconds given time
			var waitTries = 0;
			waitForCompanions = function(){
				if( waitTries > 100 ){
					ok( false, "No companions after 10 seconds" );
					start();
					return ;
				}
				if( $('#testLongCompanion').find('a').length && 
					$('#testCompanion').find('a').length ){
					equal( $('#testLongCompanion').find('a').attr('href'), "http://www.google.com", "testLongCompanion updated link" );
					equal( $('#testCompanion').find('a').attr('href'), "http://www.google.com", "testCompanion updated link" );
					kdp.sendNotification( 'doPause' );

					start();
					return ;
				}
				// increment wait count
				waitTries++;
				// Else loop: 
				setTimeout( waitForCompanions, 100 );
			}
			// Give the player time for attribute sync cyle ( happens every 250ms )
			setTimeout( waitForCompanions, 300 );
		});
	});

}
</script>
<!-- qunit-kaltura must come after qunit-bootstrap.js and after mwEmbedLoader.php and after any jsCallbackReady stuff-->
<script type="text/javascript" src="resources/qunit-kaltura-bootstrap.js"></script>
</head>
<body>
<h2> FreeWheel Ad and Companion </h2>

<a href="?forceMobileHTML5"> Force Mobile HTML5</a> for testing with desktop chrome and safari.
<br></br>

<object id="kaltura_player_1312148943" 
	name="kaltura_player_1312148943" 
	type="application/x-shockwave-flash" 
	allowFullScreen="true" 
	allowNetworking="all" 
	allowScriptAccess="always" 
	height="330" width="400" 
	bgcolor="#000000" 
	xmlns:dc="http://purl.org/dc/terms/" 
	xmlns:media="http://search.yahoo.com/searchmonkey/media/" 
	rel="media:video" 
	resource="http://www.kaltura.com/index.php/kwidget/cache_st/131214899/wid/_243342/uiconf_id/5357341/entry_id/0_uka1msg4" 
	data="http://www.kaltura.com/index.php/kwidget/cache_st/131214899/wid/_243342/uiconf_id/5357341/entry_id/0_uka1msg4">
		<param name="allowFullScreen" value="true" /><param name="allowNetworking" value="all" />
		<param name="allowScriptAccess" value="always" /><param name="bgcolor" value="#000000" />
		<param name="flashVars" value="&" />
		<param name="movie" value="http://www.kaltura.com/index.php/kwidget/cache_st/13121489439/wid/_243342/uiconf_id/5316052/entry_id/0_uka1msg4" />
</object>

<table border='1' cellpadding='1'>
		<tr><th>COMPANION SLOTS</th></tr>
		<tr>
			<td>
			    <span id="VPNT_1" class="_fwph" >
			        <form id="_fw_form_VPNT_1" style="display:none">
			            <input type="hidden" name="_fw_input_VPNT_1" id="_fw_input_VPNT_1" value="ptgt=p&h=90&w=728&cd=216,30">
			        </form>
			        <span id="_fw_container_VPNT_1">COMPANION_SLOT_1</span>
			    </span>
			</td>
		</tr>
		<tr>
			<td>
			    <span id="SSNT_1" class="_fwph" >
			        <form id="_fw_form_SSNT_1" style="display:none">
			            <input type="hidden" name="_fw_input_SSNT_1" id="_fw_input_SSNT_1" value="w=300&h=250">
			        </form>
			        <span id="_fw_container_SSNT_1">COMPANION_SLOT_2</span>
			    </span>
			</td>
		</tr>
	</table>
	<br>
	<table border='1' cellpadding='1'>
		<tr><th>STAND ALONE DISPLAY SLOTS</th></tr>
		<tr>
			<td>
			    <span id="SSNT_2" class="_fwph" >
			        <form id="_fw_form_SSNT_2" style="display:none">
			            <input type="hidden" name="_fw_input_SSNT_2" id="_fw_input_SSNT_2" value="ptgt=p&h=90&w=728&cd=216,30&flag=-cmpn">
			        </form>
			        <span id="_fw_container_SSNT_2">DISPLAY_SLOT_1</span>
			    </span>
			</td>
		</tr>
	</table>
</body>
</html>